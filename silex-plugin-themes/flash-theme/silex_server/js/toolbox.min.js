var silexNS;if(!silexNS)silexNS=new Object;silexNS.ToolBoxPopup=function(ba,ca){this.ToolBoxPopup(ba,ca);};silexNS.ToolBoxPopup.prototype={ownerWin:null,containerDiv:null,ownerToolBox:null,ToolBoxPopup:function(da,ea){this.ownerWin=ea;this.containerDiv=$("div#"+da);this.ownerToolBox=window.silexOwnerToolBoxObject;window.silexToolBoxPopupObject=this;window.onbeforeunload=function(e){window.silexToolBoxPopupObject.__ToolBoxPopup();};},__ToolBoxPopup:function(){this.ownerToolBox.onPopupClose();},toolIsReady:function(){window.silexOwnerToolBoxObject.onPopupIsReady(window.silexToolBoxPopupObject);},onSetData:function(fa){},resetData:function(){this.ownerToolBox.resetData();},onClearData:function(){},dispatchEvent:function(ga){this.ownerToolBox.dispatchEvent(ga);},onInitTool:function(){}};silexNS.ToolBox=function(ha,ia,ja,ka,la,ma){this.ToolBox(ha,ia,ja,ka,la,ma);};silexNS.ToolBox.CHANGE_EVENT="change";silexNS.ToolBox.OPEN_EVENT="open";silexNS.ToolBox.CLOSE_EVENT="close";silexNS.ToolBox.APPLY_EVENT="apply";silexNS.ToolBox.RESET_EVENT="reset";silexNS.ToolBox.CLEAR_EVENT="clear";silexNS.ToolBox.SILEX_JS_TOOLBOX_MODE_CLOSED=-1;silexNS.ToolBox.SILEX_JS_TOOLBOX_MODE_POPUP=1;silexNS.ToolBox.SILEX_JS_TOOLBOX_MODE_DIV=2;silexNS.ToolBox.prototype={dispatchEvent:function(na){this.onDispatchEvent(na);},onDispatchEvent:function(){trace("This is a virtual method which has to be implemented in the derived classes.",TRACE_ERROR,"ToolBox clearData");},toolBoxPopup:null,popupWin:null,divElement:null,containerDiv:null,_mode:-1,getMode:function(){return this._mode;},setMode:function(oa){if(oa!=this._mode){if(oa==silexNS.ToolBox.SILEX_JS_TOOLBOX_MODE_POPUP){this.createPopup();this.hideDiv();}
else{this.showDiv();this.removePopup();}
this._mode=oa;}
else if(this._mode==silexNS.ToolBox.SILEX_JS_TOOLBOX_MODE_POPUP){this.bringPopupToFront();}},data:null,initialData:null,popupWidth:null,popupHeight:null,popupUrl:null,popupRandomId:null,ToolBox:function(pa,qa,ra,sa,ta){this.popupRandomId=Math.floor(Math.random()*9999).toString();this.data=qa;this.initialData=qa;this.popupWidth=ra;this.popupHeight=sa;this.popupUrl=ta;this.containerDiv=$("div#"+pa);window.onbeforeunload=delegate(this,this.__ToolBox);},__ToolBox:function(){this.removePopup();},setData:function(ua){if(this._mode==silexNS.ToolBox.SILEX_JS_TOOLBOX_MODE_CLOSED){this.setMode(silexNS.ToolBox.SILEX_JS_TOOLBOX_MODE_DIV);}
this.initialData=this.data=ua;if(this._mode==silexNS.ToolBox.SILEX_JS_TOOLBOX_MODE_POPUP){this.toolBoxPopup.onSetData(this.data);}
else{this.onSetData(this.data);}},getData:function(){return this.data;},onSetData:function(va){trace("This is a virtual method which has to be implemented in the derived classes.",TRACE_ERROR,"ToolBox setData");},resetData:function(){this.setData(this.initialData);},clearData:function(){this.onClearData(this.data);this.initialData=this.getData();},onClearData:function(){trace("This is a virtual method which has to be implemented in the derived classes.",TRACE_ERROR,"ToolBox clearData");},show:function(){if(this._mode==silexNS.ToolBox.SILEX_JS_TOOLBOX_MODE_POPUP){this.createPopup();}
else this.showDiv();},hide:function(){if(this._mode==silexNS.ToolBox.SILEX_JS_TOOLBOX_MODE_POPUP){this.removePopup();}
else this.hideDiv();},createDiv:function(){trace("createDiv not implemented yet");},removeDiv:function(){trace("removeDiv not implemented yet");},showDiv:function(){this.onShowDiv();},onShowDiv:function(){trace("onShowDiv to be implemented in the tool");},hideDiv:function(){this.onHideDiv();},onHideDiv:function(){trace("onHideDiv to be implemented in the tool - ");},resizeDiv:function(){trace("resizeDiv not implemented yet");},moveDiv:function(){trace("moveDiv not implemented yet");},createPopup:function(){if(!this.popupWin){var wa='toolbar=no, menubar=no, resizable=no, location=no, directories=no, status=no, height='+this.popupHeight+', width='+this.popupWidth;this.popupWin=window.open(this.popupUrl,this.popupRandomId,config=wa);if(!this.popupWin.opener)this.popupWin.opener=self;this.popupWin.silexOwnerToolBoxObject=this;}
else{this.bringPopupToFront();}},removePopup:function(){if(this.popupWin)this.popupWin.close();},bringPopupToFront:function(){if(this.popupWin){this.popupWin.focus();}},resizePopup:function(){trace("resizePopup not implemented yet");},movePopup:function(){trace("movePopup not implemented yet");},onPopupIsReady:function(xa){this.toolBoxPopup=xa;if(!this.toolBoxPopup){trace("tool box is not defined in the popup",TRACE_ERROR,"ToolBox createPopup");throw(new Error("tool box is not defined in the popup"));}
else{this.toolBoxPopup.onSetData(this.data);}},onPopupClose:function(){if(this.popupWin)this.popupWin.close();this.toolBoxPopup=null;this.popupWin=null;this._mode=silexNS.ToolBox.SILEX_JS_TOOLBOX_MODE_CLOSED;}}